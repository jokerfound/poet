import{z as p,r as l,h as i}from"./index-2ecfb517.js";const H=p("poem",()=>{const a=l([]),t=l([]),o=l([]),n=i(()=>a.value),u=i(()=>t.value.slice().reverse()),m=i(()=>o.value.slice().reverse()),S=e=>{const r=a.value.indexOf(e);r>-1?a.value.splice(r,1):a.value.push(e),localStorage.setItem("poemFavorites",JSON.stringify(a.value))},g=e=>{const r=t.value.findIndex(s=>s.id===e.id);r>-1&&t.value.splice(r,1),t.value.push({id:e.id,title:e.title,author:e.author,timestamp:new Date().toISOString()}),t.value.length>50&&t.value.shift(),localStorage.setItem("poemHistory",JSON.stringify(t.value))},d=e=>{if(!e.trim())return;const r=o.value.indexOf(e);r>-1&&o.value.splice(r,1),o.value.push(e),o.value.length>20&&o.value.shift(),localStorage.setItem("poemSearchHistory",JSON.stringify(o.value))},f=()=>{o.value=[],localStorage.removeItem("poemSearchHistory")},h=()=>{t.value=[],localStorage.removeItem("poemHistory")},c=()=>{try{const e=localStorage.getItem("poemFavorites"),r=localStorage.getItem("poemHistory"),s=localStorage.getItem("poemSearchHistory");e&&(a.value=JSON.parse(e)),r&&(t.value=JSON.parse(r)),s&&(o.value=JSON.parse(s))}catch(e){console.error("加载本地存储数据失败:",e),v()}},v=()=>{a.value=[],t.value=[],o.value=[],localStorage.removeItem("poemFavorites"),localStorage.removeItem("poemHistory"),localStorage.removeItem("poemSearchHistory")};return c(),{favorites:a,readingHistory:t,searchHistory:o,favoritePoems:n,history:u,searchRecords:m,toggleFavorite:S,addToHistory:g,addSearchRecord:d,clearSearchHistory:f,clearReadingHistory:h,clearAllData:v,loadFromStorage:c}});export{H as u};
