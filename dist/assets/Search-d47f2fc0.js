import{_ as R,u as L,r as c,h as b,m as V,o as a,c as n,b as e,i as m,v as $,x as B,g as M,y as v,F as p,f as k,k as y,t as r,j as q}from"./index-2ecfb517.js";import{u as D}from"./poemStore-990be7b1.js";const N={class:"search"},P={class:"container"},T={class:"search-header"},E={class:"search-box"},F={key:0,class:"search-history"},H={class:"history-tags"},I=["onClick"],K={key:0,class:"search-results"},U={class:"results-header"},j={class:"sort-controls"},Q={class:"results-grid"},z=["onClick"],A={class:"result-card"},G={class:"poem-title"},J={class:"poem-author"},O={class:"poem-preview"},W={class:"result-meta"},X={class:"meta-item"},Y={class:"meta-item"},Z={key:1,class:"empty-state"},ee={key:2,class:"popular-searches"},te={class:"popular-tags"},se=["onClick"],oe={__name:"Search",setup(le){const C=L(),i=D(),l=c(""),u=c([]),_=c("relevance"),g=c(["李白","杜甫","唐诗","宋词","月亮","思乡","春天","爱情","山水","送别","边塞","咏史","豪放","婉约","田园"]),w=c([{id:1,title:"静夜思",author:"李白",dynasty:"唐代",content:"床前明月光，疑是地上霜。举头望明月，低头思故乡。",wordCount:20,likes:1250},{id:2,title:"春晓",author:"孟浩然",dynasty:"唐代",content:"春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少。",wordCount:20,likes:980},{id:3,title:"登鹳雀楼",author:"王之涣",dynasty:"唐代",content:"白日依山尽，黄河入海流。欲穷千里目，更上一层楼。",wordCount:20,likes:1560},{id:4,title:"江雪",author:"柳宗元",dynasty:"唐代",content:"千山鸟飞绝，万径人踪灭。孤舟蓑笠翁，独钓寒江雪。",wordCount:20,likes:890},{id:5,title:"望庐山瀑布",author:"李白",dynasty:"唐代",content:"日照香炉生紫烟，遥看瀑布挂前川。飞流直下三千尺，疑是银河落九天。",wordCount:28,likes:2340},{id:6,title:"相思",author:"王维",dynasty:"唐代",content:"红豆生南国，春来发几枝。愿君多采撷，此物最相思。",wordCount:20,likes:1780}]),d=()=>{if(!l.value.trim())return;i.addSearchRecord(l.value);const o=l.value.toLowerCase();u.value=w.value.filter(t=>t.title.toLowerCase().includes(o)||t.author.toLowerCase().includes(o)||t.content.toLowerCase().includes(o)||t.dynasty.toLowerCase().includes(o))},f=o=>{if(!l.value)return o;const t=l.value,s=new RegExp(t,"gi");return o.replace(s,h=>`<mark>${h}</mark>`)},S=b(()=>{const o=[...u.value];switch(_.value){case"title":return o.sort((t,s)=>t.title.localeCompare(s.title));case"author":return o.sort((t,s)=>t.author.localeCompare(s.author));case"dynasty":return o.sort((t,s)=>t.dynasty.localeCompare(s.dynasty));case"relevance":default:return o}}),x=o=>{C.push(`/poems/${o}`)};return V(()=>{const o=document.querySelector(".search-input");o&&o.focus()}),(o,t)=>(a(),n("div",N,[e("div",P,[e("div",T,[t[5]||(t[5]=e("h1",null,"搜索诗词",-1)),e("div",E,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),type:"text",placeholder:"输入诗词标题、作者、内容或关键词...",onKeyup:B(d,["enter"]),class:"search-input"},null,544),[[$,l.value]]),e("button",{class:"search-btn",onClick:d},[...t[3]||(t[3]=[e("span",{class:"search-icon"},"🔍",-1),M(" 搜索 ",-1)])])]),v(i).searchRecords.length>0?(a(),n("div",F,[t[4]||(t[4]=e("h3",null,"搜索历史",-1)),e("div",H,[(a(!0),n(p,null,k(v(i).searchRecords,s=>(a(),n("span",{key:s,class:"history-tag",onClick:h=>{l.value=s,d()}},r(s),9,I))),128))]),e("button",{class:"clear-history",onClick:t[1]||(t[1]=(...s)=>v(i).clearSearchHistory&&v(i).clearSearchHistory(...s))}," 清除历史 ")])):y("",!0)]),u.value.length>0?(a(),n("div",K,[e("div",U,[e("h2",null,"搜索结果 ("+r(u.value.length)+")",1),e("div",j,[m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),class:"sort-select"},[...t[6]||(t[6]=[e("option",{value:"relevance"},"相关度",-1),e("option",{value:"title"},"标题",-1),e("option",{value:"author"},"作者",-1),e("option",{value:"dynasty"},"朝代",-1)])],512),[[q,_.value]])])]),e("div",Q,[(a(!0),n(p,null,k(S.value,s=>(a(),n("div",{class:"result-item",key:s.id,onClick:h=>x(s.id)},[e("div",A,[e("h3",G,r(s.title),1),e("p",J,r(s.author)+" · "+r(s.dynasty),1),e("div",O,r(f(s.content)),1),e("div",W,[e("span",X,"📖 "+r(s.wordCount)+"字",1),e("span",Y,"❤️ "+r(s.likes),1)])])],8,z))),128))])])):y("",!0),l.value&&u.value.length===0?(a(),n("div",Z,[...t[7]||(t[7]=[e("div",{class:"empty-icon"},"🔍",-1),e("h3",null,"未找到相关诗词",-1),e("p",null,"尝试使用不同的关键词或检查拼写",-1),e("div",{class:"suggestions"},[e("h4",null,"搜索建议："),e("ul",null,[e("li",null,"使用更具体的关键词"),e("li",null,"尝试作者姓名"),e("li",null,"使用诗词中的关键词"),e("li",null,"检查拼写是否正确")])],-1)])])):y("",!0),l.value?y("",!0):(a(),n("div",ee,[t[8]||(t[8]=e("h2",null,"热门搜索",-1)),e("div",te,[(a(!0),n(p,null,k(g.value,s=>(a(),n("span",{key:s,class:"popular-tag",onClick:h=>{l.value=s,d()}},r(s),9,se))),128))])]))])]))}},re=R(oe,[["__scopeId","data-v-ee686a05"]]);export{re as default};
