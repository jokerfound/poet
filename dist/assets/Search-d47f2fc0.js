import{_ as R,u as L,r as c,h as b,m as V,o as a,c as n,b as e,i as m,v as $,x as B,g as M,y as v,F as p,f as k,k as y,t as r,j as q}from"./index-2ecfb517.js";import{u as D}from"./poemStore-990be7b1.js";const N={class:"search"},P={class:"container"},T={class:"search-header"},E={class:"search-box"},F={key:0,class:"search-history"},H={class:"history-tags"},I=["onClick"],K={key:0,class:"search-results"},U={class:"results-header"},j={class:"sort-controls"},Q={class:"results-grid"},z=["onClick"],A={class:"result-card"},G={class:"poem-title"},J={class:"poem-author"},O={class:"poem-preview"},W={class:"result-meta"},X={class:"meta-item"},Y={class:"meta-item"},Z={key:1,class:"empty-state"},ee={key:2,class:"popular-searches"},te={class:"popular-tags"},se=["onClick"],oe={__name:"Search",setup(le){const C=L(),i=D(),l=c(""),u=c([]),_=c("relevance"),g=c(["æŽç™½","æœç”«","å”è¯—","å®‹è¯","æœˆäº®","æ€ä¹¡","æ˜¥å¤©","çˆ±æƒ…","å±±æ°´","é€åˆ«","è¾¹å¡ž","å’å²","è±ªæ”¾","å©‰çº¦","ç”°å›­"]),w=c([{id:1,title:"é™å¤œæ€",author:"æŽç™½",dynasty:"å”ä»£",content:"åºŠå‰æ˜Žæœˆå…‰ï¼Œç–‘æ˜¯åœ°ä¸Šéœœã€‚ä¸¾å¤´æœ›æ˜Žæœˆï¼Œä½Žå¤´æ€æ•…ä¹¡ã€‚",wordCount:20,likes:1250},{id:2,title:"æ˜¥æ™“",author:"å­Ÿæµ©ç„¶",dynasty:"å”ä»£",content:"æ˜¥çœ ä¸è§‰æ™“ï¼Œå¤„å¤„é—»å•¼é¸Ÿã€‚å¤œæ¥é£Žé›¨å£°ï¼ŒèŠ±è½çŸ¥å¤šå°‘ã€‚",wordCount:20,likes:980},{id:3,title:"ç™»é¹³é›€æ¥¼",author:"çŽ‹ä¹‹æ¶£",dynasty:"å”ä»£",content:"ç™½æ—¥ä¾å±±å°½ï¼Œé»„æ²³å…¥æµ·æµã€‚æ¬²ç©·åƒé‡Œç›®ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼ã€‚",wordCount:20,likes:1560},{id:4,title:"æ±Ÿé›ª",author:"æŸ³å®—å…ƒ",dynasty:"å”ä»£",content:"åƒå±±é¸Ÿé£žç»ï¼Œä¸‡å¾„äººè¸ªç­ã€‚å­¤èˆŸè“‘ç¬ ç¿ï¼Œç‹¬é’“å¯’æ±Ÿé›ªã€‚",wordCount:20,likes:890},{id:5,title:"æœ›åºå±±ç€‘å¸ƒ",author:"æŽç™½",dynasty:"å”ä»£",content:"æ—¥ç…§é¦™ç‚‰ç”Ÿç´«çƒŸï¼Œé¥çœ‹ç€‘å¸ƒæŒ‚å‰å·ã€‚é£žæµç›´ä¸‹ä¸‰åƒå°ºï¼Œç–‘æ˜¯é“¶æ²³è½ä¹å¤©ã€‚",wordCount:28,likes:2340},{id:6,title:"ç›¸æ€",author:"çŽ‹ç»´",dynasty:"å”ä»£",content:"çº¢è±†ç”Ÿå—å›½ï¼Œæ˜¥æ¥å‘å‡ æžã€‚æ„¿å›å¤šé‡‡æ’·ï¼Œæ­¤ç‰©æœ€ç›¸æ€ã€‚",wordCount:20,likes:1780}]),d=()=>{if(!l.value.trim())return;i.addSearchRecord(l.value);const o=l.value.toLowerCase();u.value=w.value.filter(t=>t.title.toLowerCase().includes(o)||t.author.toLowerCase().includes(o)||t.content.toLowerCase().includes(o)||t.dynasty.toLowerCase().includes(o))},f=o=>{if(!l.value)return o;const t=l.value,s=new RegExp(t,"gi");return o.replace(s,h=>`<mark>${h}</mark>`)},S=b(()=>{const o=[...u.value];switch(_.value){case"title":return o.sort((t,s)=>t.title.localeCompare(s.title));case"author":return o.sort((t,s)=>t.author.localeCompare(s.author));case"dynasty":return o.sort((t,s)=>t.dynasty.localeCompare(s.dynasty));case"relevance":default:return o}}),x=o=>{C.push(`/poems/${o}`)};return V(()=>{const o=document.querySelector(".search-input");o&&o.focus()}),(o,t)=>(a(),n("div",N,[e("div",P,[e("div",T,[t[5]||(t[5]=e("h1",null,"æœç´¢è¯—è¯",-1)),e("div",E,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),type:"text",placeholder:"è¾“å…¥è¯—è¯æ ‡é¢˜ã€ä½œè€…ã€å†…å®¹æˆ–å…³é”®è¯...",onKeyup:B(d,["enter"]),class:"search-input"},null,544),[[$,l.value]]),e("button",{class:"search-btn",onClick:d},[...t[3]||(t[3]=[e("span",{class:"search-icon"},"ðŸ”",-1),M(" æœç´¢ ",-1)])])]),v(i).searchRecords.length>0?(a(),n("div",F,[t[4]||(t[4]=e("h3",null,"æœç´¢åŽ†å²",-1)),e("div",H,[(a(!0),n(p,null,k(v(i).searchRecords,s=>(a(),n("span",{key:s,class:"history-tag",onClick:h=>{l.value=s,d()}},r(s),9,I))),128))]),e("button",{class:"clear-history",onClick:t[1]||(t[1]=(...s)=>v(i).clearSearchHistory&&v(i).clearSearchHistory(...s))}," æ¸…é™¤åŽ†å² ")])):y("",!0)]),u.value.length>0?(a(),n("div",K,[e("div",U,[e("h2",null,"æœç´¢ç»“æžœ ("+r(u.value.length)+")",1),e("div",j,[m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),class:"sort-select"},[...t[6]||(t[6]=[e("option",{value:"relevance"},"ç›¸å…³åº¦",-1),e("option",{value:"title"},"æ ‡é¢˜",-1),e("option",{value:"author"},"ä½œè€…",-1),e("option",{value:"dynasty"},"æœä»£",-1)])],512),[[q,_.value]])])]),e("div",Q,[(a(!0),n(p,null,k(S.value,s=>(a(),n("div",{class:"result-item",key:s.id,onClick:h=>x(s.id)},[e("div",A,[e("h3",G,r(s.title),1),e("p",J,r(s.author)+" Â· "+r(s.dynasty),1),e("div",O,r(f(s.content)),1),e("div",W,[e("span",X,"ðŸ“– "+r(s.wordCount)+"å­—",1),e("span",Y,"â¤ï¸ "+r(s.likes),1)])])],8,z))),128))])])):y("",!0),l.value&&u.value.length===0?(a(),n("div",Z,[...t[7]||(t[7]=[e("div",{class:"empty-icon"},"ðŸ”",-1),e("h3",null,"æœªæ‰¾åˆ°ç›¸å…³è¯—è¯",-1),e("p",null,"å°è¯•ä½¿ç”¨ä¸åŒçš„å…³é”®è¯æˆ–æ£€æŸ¥æ‹¼å†™",-1),e("div",{class:"suggestions"},[e("h4",null,"æœç´¢å»ºè®®ï¼š"),e("ul",null,[e("li",null,"ä½¿ç”¨æ›´å…·ä½“çš„å…³é”®è¯"),e("li",null,"å°è¯•ä½œè€…å§“å"),e("li",null,"ä½¿ç”¨è¯—è¯ä¸­çš„å…³é”®è¯"),e("li",null,"æ£€æŸ¥æ‹¼å†™æ˜¯å¦æ­£ç¡®")])],-1)])])):y("",!0),l.value?y("",!0):(a(),n("div",ee,[t[8]||(t[8]=e("h2",null,"çƒ­é—¨æœç´¢",-1)),e("div",te,[(a(!0),n(p,null,k(g.value,s=>(a(),n("span",{key:s,class:"popular-tag",onClick:h=>{l.value=s,d()}},r(s),9,se))),128))])]))])]))}},re=R(oe,[["__scopeId","data-v-ee686a05"]]);export{re as default};
